<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>二级菜单</title>
    <link rel="stylesheet" type="text/css" href="css/sdmenu.css">
    <script type="text/javascript" src="js/tool.js"></script>

    <style>
        *{
            margin: 0;
            padding: 0;
            list-style-type: none;
        }
        a{
            border: 0;
            text-decoration: none;
        }
        body{
            font: 12px/180% Arial,Helvetica ,sans-serif,"新宋体";
        }
    </style>
    <script>
        window.onload=function () {
        // 每个菜单都是一个div
        // 当div具有collapsed，则是折叠状态
        //当div没有这个类 div则展开状态

        //    点击菜单 切换菜单显示状态
        //    获取所有class=menuSpan的元素
            var menuSpan=document.querySelectorAll(".menuSpan");
            var openDiv=menuSpan[0].parentNode;  //保存已经打开的div
            for (var i=0;i<menuSpan.length;i++){
                menuSpan[i].onclick=function () {
                    // this:当前点击的span
                     var parentDiv=this.parentNode;

                    toggleMenu(parentDiv);
                    if (openDiv!=parentDiv && !hasClass(openDiv,"collapsed")){
                        //需求：打开一个新菜单 关闭其他打开的菜单
                        //此处就没有移除功能
                        // addClass(parentDiv,"collapsed")
                        // Toggle(parentDiv,"collapsed");

                        toggleMenu(parentDiv)
                    }
                    openDiv=parentDiv;
                }
            }
            function toggleMenu(obj) {
                // 在切换之前获取高度
                var begin=obj.offsetHeight;

                //添加/删除类collapsed 使其折叠或展开
                Toggle(obj,"collapsed");
                // 在切换之后获取高度
                var end=obj.offsetHeight;

                //将元素高度重置为begin
                obj.style.height=begin+"px";
                //过渡效果
                move(obj,5,end,"height",function () {
                    //动画执行完毕 内联样式无意义 需要进行删除
                    obj.style.height="";
                });


            }
        }
    </script>
</head>
<body>
<div id="myMenu" class="sdMenu">
    <div>
        <span class="menuSpan">在线工具</span>
        <a href="#">图像优化</a>
        <a href="#">邮件</a>
        <a href="#">梯度图像</a>
        <a href="#">按钮生成器</a>
        <a href="#">收藏夹图标生成器</a>
        <a href="#">htAccess密码</a>
     </div>
    <div class="collapsed">
        <span class="menuSpan">支持我们</span>
        <a href="#">推荐我们</a>
        <a href="#">联系我们</a>
        <a href="#">网络资源</a>
    </div>
    <div class="collapsed">
        <span class="menuSpan">合作伙伴</span>
        <a href="#">JavaScript工具</a>
        <a href="#">CSS驱动</a>
        <a href="#">CSS例子</a>
        <a href="#">CodingForums</a>
    </div>
    <div class="collapsed">
        <span class="menuSpan">测试电流</span>
        <a href="#">Current or not</a>
        <a href="#">Current or not</a>
        <a href="#">Current or not</a>
        <a href="#">Current or not</a>
    </div>
</div>
</body>
</html>